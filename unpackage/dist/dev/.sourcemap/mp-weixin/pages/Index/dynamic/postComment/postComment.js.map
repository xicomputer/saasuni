{"version":3,"sources":["uni-app:///main.js","webpack:///D:/products/xssj_New_basic_uni/pages/Index/dynamic/postComment/postComment.vue?3172","webpack:///D:/products/xssj_New_basic_uni/pages/Index/dynamic/postComment/postComment.vue?9cf4","webpack:///D:/products/xssj_New_basic_uni/pages/Index/dynamic/postComment/postComment.vue?4ce3","webpack:///D:/products/xssj_New_basic_uni/pages/Index/dynamic/postComment/postComment.vue?000d","uni-app:///pages/Index/dynamic/postComment/postComment.vue","webpack:///D:/products/xssj_New_basic_uni/pages/Index/dynamic/postComment/postComment.vue?b316","webpack:///D:/products/xssj_New_basic_uni/pages/Index/dynamic/postComment/postComment.vue?d5c9"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"pages/Index/dynamic/postComment/postComment.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/Index/dynamic/postComment/postComment.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./postComment.vue?vue&type=template&id=2a875059&\"\nvar renderjs\nimport script from \"./postComment.vue?vue&type=script&lang=js&\"\nexport * from \"./postComment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./postComment.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/Index/dynamic/postComment/postComment.vue\"\nexport default component.exports","export * from \"-!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./postComment.vue?vue&type=template&id=2a875059&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./postComment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./postComment.vue?vue&type=script&lang=js&\"","<template>\n    <view>\n        <view class=\"release-dynamic-box\">\n            <textarea class=\"txtarea\" :value=\"content\" @input=\"bindTextAreaBlur\" maxlength=\"100\" auto-height placeholder=\"来吧，尽情发挥吧...\" placeholder-style=\"color:#999\" />\n            <!-- 上传图片 -->\n            <view class=\"content-image\">\n                <view class=\"image-box\" v-for=\"(item, index) in fileList\" :key=\"index\">\n                    <image :src=\"item\" class=\"image-img\" @tap=\"zoomImg\" mode=\"aspectFill\" :data-list=\"fileList\" :data-src=\"item\"></image>\n\n                    <image src=\"/static/pages/img/shanchu.png\" class=\"image-del\" @tap=\"delImg\" :data-index=\"index\"></image>\n                </view>\n                <view v-if=\"fileList.length < 6\" class=\"image-box uploadImg\" @tap=\"uploadImage\">\n                    <image class=\"uploadImg-btn\" src=\"/static/pages/img/order/upload.png\"></image>\n                    上传图片\n                </view>\n            </view>\n        </view>\n        <view class=\"dynamic-conent-box\">\n            <view>每天可以发布一条信息</view>\n            <view class=\"dynamic-conent-btn\" @tap=\"submit\">发布</view>\n        </view>\n        <!-- 通知 -->\n        <view class=\"dynamic-notice\">尊敬的用户，您发布的内容须遵守相关法律法规和订阅通知规则， 请严格遵守相关规定，已免违规</view>\n\n        <!-- <view class=\"dynamic-notice\">\n  <image src=\"/pages/img/smallShop/gantang.png\" style=\"width:24rpx;height:24rpx;margin-right:8rpx\"></image>\n  <text class=\"notice-text\">尊敬的用户，您发布的内容须遵守相关法律法规和订阅通知规则，请严格遵守相关规定，以免违规。</text>\n</view>\n<view class=\"dynamic-bottom\">\n  <view class=\"cancel-btn\" bindtap=\"cancel\">取消</view>\n  <view class=\"cancel-btn comfirm-btn\" bindtap=\"submit\">发布</view>\n</view> -->\n    </view>\n</template>\n\n<script>\n// pages/smallShop/releaseDynamic/releaseDynamic.js\nconst app = getApp();\nexport default {\n    data() {\n        return {\n            fileList: [],\n\n            // 图片数据\n            content: '',\n\n            // 输入的内容\n            imgUuid: '',\n\n            // 图片imgUuid\n            // 小店id\n            storeId: 0,\n\n            marchantId: '',\n            taskText: '',\n            showTaskPop: false\n        };\n    }\n    /**\n     * 生命周期函数--监听页面加载\n     */,\n    onLoad: function (options) {\n        this.setData({\n            marchantId: options.marchantId\n        });\n    },\n    /**\n     * 生命周期函数--监听页面初次渲染完成\n     */\n    onReady: function () {},\n    /**\n     * 生命周期函数--监听页面显示\n     */\n    onShow: function () {},\n    /**\n     * 生命周期函数--监听页面隐藏\n     */\n    onHide: function () {},\n    /**\n     * 生命周期函数--监听页面卸载\n     */\n    onUnload: function () {},\n    /**\n     * 页面相关事件处理函数--监听用户下拉动作\n     */\n    onPullDownRefresh: function () {},\n    /**\n     * 页面上拉触底事件的处理函数\n     */\n    onReachBottom: function () {},\n    /**\n     * 用户点击右上角分享\n     */ methods: {\n        // 赋值\n        bindTextAreaBlur: function (e) {\n            this.setData({\n                content: e.detail.value\n            });\n        },\n\n        // 取消\n        cancel() {\n            uni.showModal({\n                content: '确定要取消发布吗？',\n                showCancel: true,\n                //是否显示取消按钮\n                cancelText: '继续发布',\n                //默认是“取消”\n                cancelColor: '#576b95',\n                //取消文字的颜色\n                confirmText: '取消发布',\n                //默认是“确定”\n                confirmColor: '#ccc',\n                //确定文字的颜色\n                success: function (res) {\n                    if (res.cancel) {\n                        //点击取消,默认隐藏弹框\n                        return;\n                    } else {\n                        uni.navigateBack({\n                            delta: 0\n                        });\n                    }\n                }\n            });\n        },\n\n        // 选择图片\n        uploadImage() {\n            const _this = this;\n\n            uni.chooseImage({\n                count: 6 - _this.fileList.length,\n                sizeType: ['compressed'],\n                sourceType: ['album'],\n\n                success(res) {\n                    res.tempFilePaths.forEach((item, index) => {\n                        _this.fileList.push(item);\n                    });\n\n                    _this.setData({\n                        fileList: _this.fileList\n                    });\n                }\n            });\n        },\n\n        // 预览图片\n        zoomImg(e) {\n            const { src, list } = e.currentTarget.dataset;\n            uni.previewImage({\n                current: src,\n                // 当前显示图片的http链接\n                urls: list // 需要预览的图片http链接列表\n            });\n        },\n\n        // 删除图片\n        delImg(e) {\n            const { index } = e.currentTarget.dataset;\n            let imgList = this.fileList;\n            imgList.splice(index, 1);\n            this.setData({\n                fileList: imgList\n            });\n        },\n\n        // 上传图片\n        upload(count) {\n            const _this = this;\n\n            var fxToken = uni.getStorageSync('token');\n            uni.uploadFile({\n                url: app.globalData.imgUrl2,\n                //仅为示例，非真实的接口地址\n                filePath: _this.fileList[count],\n                name: 'imgs',\n                formData: _this.imgUuid\n                    ? {\n                          uuid: _this.imgUuid,\n                          token: uni.getStorageSync('token')\n                      }\n                    : {\n                          token: uni.getStorageSync('token')\n                      },\n                header: {\n                    token: fxToken,\n                    'Content-Type': 'multipart/form-data',\n                    //form-data格式\n                    Accept: 'application/json'\n                },\n\n                complete(res) {\n                    console.log(res);\n                    count++;\n\n                    _this.setData({\n                        imgUuid: JSON.parse(res.data).data.imgUuid\n                    });\n\n                    if (count == _this.fileList.length) {\n                        // 图片上传完毕，去上传文字\n                        _this.sendComment();\n                    } else {\n                        _this.upload(count);\n                    }\n                }\n            });\n        },\n\n        // 发送评论\n        sendComment() {\n            const data = {\n                content: this.content,\n                //评价内容\n                imgUuid: this.imgUuid,\n                //图片标识\n                marchantId: this.marchantId\n            };\n            var token = uni.getStorageSync('token');\n            app.globalData.sjrequest('/marchant/addMarchantComment', data).then((res) => {\n                if (res.data.code == 200) {\n                    uni.showToast({\n                        title: '发布成功,等待审核',\n                        icon: 'none'\n                    });\n                    let result = res.data.data;\n                    setTimeout((res) => {\n                        if (result.bomb) {\n                            var pages = getCurrentPages();\n                            var currPage = pages[pages.length - 1]; // 当前页面\n\n                            var prevPage = pages[pages.length - 2];\n\n                            if (prevPage.data.taskText) {\n                                prevPage.setData({\n                                    taskText: '你已完成发布动态任务获取3积分'\n                                });\n                            }\n\n                            prevPage.setData({\n                                showTaskPop: true\n                            });\n                        }\n\n                        uni.navigateBack({\n                            delta: 0\n                        });\n                    }, 1000);\n                } else {\n                    uni.showToast({\n                        title: res.data.msg,\n                        icon: 'none'\n                    });\n                }\n            });\n        },\n\n        // 提交评论\n        submit() {\n            if (this.content.length < 5) {\n                uni.showToast({\n                    title: '评论最少5字哟~',\n                    icon: 'none'\n                });\n                return;\n            }\n\n            if (this.fileList.length == 0) {\n                uni.showToast({\n                    title: '评论最少需要上传一张图片哟~',\n                    icon: 'none'\n                });\n                return;\n            }\n\n            uni.showLoading({\n                title: '发布中',\n                mask: true\n            });\n            this.upload(0);\n        }\n    }\n};\n</script>\n<style>\n.release-dynamic-box {\n    width: 100%;\n    padding: 28rpx;\n    box-sizing: border-box;\n}\n.txtarea {\n    width: 100%;\n    min-height: 300rpx;\n    font-size: 24rpx;\n    font-weight: bold;\n    line-height: 34rpx;\n    color: #333333;\n}\n/* 上传图片 */\n.content-image .image-box:nth-child(4n) {\n    margin: 20rpx 0rpx 0 0;\n}\n.content-image {\n    padding-bottom: 10rpx;\n    display: flex;\n    flex-wrap: wrap;\n}\n.image-box {\n    position: relative;\n    width: 160rpx;\n    height: 160rpx;\n    border-radius: 10rpx;\n    overflow: hidden;\n    margin: 20rpx 18rpx 0 0;\n}\n.image-img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n.image-del {\n    width: 40rpx;\n    height: 40rpx;\n    position: absolute;\n    top: 0;\n    right: 0;\n}\n.uploadImg {\n    background: #f2f2f2;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    font-size: 20rpx;\n    color: #999999;\n    font-weight: 600;\n    border: 2rpx dashed #999999;\n}\n.uploadImg-btn {\n    width: 68rpx;\n    height: 61rpx;\n    margin-bottom: 16rpx;\n}\n/* 发布 */\n.dynamic-conent-box {\n    width: 100%;\n    height: 68rpx;\n    padding: 0 20rpx;\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 22rpx;\n    font-family: PingFang SC;\n    font-weight: 400;\n    color: #999999;\n    border-top: 2rpx solid #f4f4f4;\n    border-bottom: 2rpx solid #f4f4f4;\n}\n.dynamic-conent-btn {\n    width: 110rpx;\n    height: 46rpx;\n    background: #fe4a0b;\n    border-radius: 10rpx;\n    font-size: 24rpx;\n    font-family: PingFang SC;\n    font-weight: bold;\n    color: #ffffff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n/* 通知 */\n.dynamic-notice {\n    width: 594rpx;\n    height: 64rpx;\n    font-size: 22rpx;\n    font-family: PingFang SC;\n    font-weight: 400;\n    line-height: 32rpx;\n    color: #999999;\n    margin-top: 16rpx;\n    margin-left: 20rpx;\n}\n</style>\n","import mod from \"-!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./postComment.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./postComment.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1659404707355\n      var cssReload = require(\"D:/hbuild/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}