{"version":3,"sources":["uni-app:///main.js","webpack:///D:/products/xssj_New_basic_uni/pages/order/orderListCity/orderListCity.vue?cd57","webpack:///D:/products/xssj_New_basic_uni/pages/order/orderListCity/orderListCity.vue?e02d","webpack:///D:/products/xssj_New_basic_uni/pages/order/orderListCity/orderListCity.vue?a0ac","webpack:///D:/products/xssj_New_basic_uni/pages/order/orderListCity/orderListCity.vue?dda7","uni-app:///pages/order/orderListCity/orderListCity.vue","webpack:///D:/products/xssj_New_basic_uni/pages/order/orderListCity/orderListCity.vue?e7ec","webpack:///D:/products/xssj_New_basic_uni/pages/order/orderListCity/orderListCity.vue?2ae2"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,2H,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,sBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0H;AAC1H;AACiE;AACL;AACa;;;AAGzE;AAC6K;AAC7K,gBAAgB,oLAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,wFAAM;AACR,EAAE,iGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA4pB,CAAgB,0pBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6JhrB;AACA;AACA;AACA;;AAEA,mB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA,GADA;AASA,MATA,kBASA;AACA;AACA;AACA,iBAFA;;AAIA,kBAJA;AAKA,qBALA;AAMA,qBANA;AAOA,kBAPA;;AASA;AACA;AACA,mBADA,EADA;;AAIA;AACA,mBADA,EAJA;;AAOA;AACA,mBADA,EAPA;;AAUA;AACA,mBADA,EAVA;;AAaA;AACA,mBADA,EAbA,CATA;;;;AA2BA,iBA3BA;AA4BA,mBA5BA;AA6BA,mBA7BA;AA8BA,cA9BA;;AAgCA,GA1CA;AA2CA;;;AAGA;AACA;AACA;AACA,4CADA;;AAGA;;AAEA;AACA;AACA,gDADA;;AAGA;;AAEA;AACA;AACA,4BAFA;;AAIA,GA/DA;AAgEA;;;AAGA,gCAnEA;AAoEA;;;AAGA;AACA;AACA,GAzEA;AA0EA;;;AAGA,8BA7EA;AA8EA;;;AAGA,kCAjFA;AAkFA;;;AAGA,oDArFA;AAsFA;;;AAGA;AACA;AACA;AACA;AACA,GA7FA;AA8FA;AACA;AACA,YAFA,sBAEA;AACA;AACA;AACA,KALA;;AAOA;AACA,YARA,oBAQA,CARA,EAQA;AACA;AACA;AACA;AACA,uBADA;;AAGA;AACA;AACA,KAhBA;;AAkBA;AACA,aAnBA,uBAmBA;AACA;AACA,mBADA;AAEA,qBAFA;AAGA,uBAHA;;AAKA,KAzBA;;AA2BA;AACA,mBA5BA,2BA4BA,CA5BA,EA4BA;AACA;AACA;AACA;AACA,6BADA;AAEA,yBAFA;AAGA,iCAHA;AAIA,oBAJA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBATA;;;AAYA;AACA;AACA,qBADA;AAEA,uBAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA,kCAFA;;AAIA;AACA;AACA;AACA,mBAHA,EAGA,IAHA;AAIA;AACA,eAXA;AAYA,aAdA,MAcA;AACA;AACA;AACA,WArBA;;AAuBA;AACA,KA5EA;;AA8EA;AACA,eA/EA,uBA+EA,CA/EA,EA+EA;AACA;AACA;AACA;AACA,6BADA;AAEA,iBAFA;AAGA,4BAHA;;AAKA;AACA,mBADA;AAEA,2BAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,gCAFA;;AAIA;AACA;AACA,+BADA;;AAGA;AACA;AACA,iBANA,EAMA,IANA;AAOA;AACA,aAdA;AAeA,WAjBA,MAiBA;AACA;AACA;AACA,SAxBA;;AA0BA,KAjHA;;AAmHA;AACA,iBApHA,yBAoHA,CApHA,EAoHA,QApHA,EAoHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDADA;AAEA,qBAFA;AAGA,sDAHA;;AAKA;AACA;AACA;AACA,8BADA;AAEA,wBAFA;AAGA,0BAHA;AAIA;AACA;AACA,2BADA;;AAGA;AACA,aATA;;AAWA;AACA,OAdA;AAeA,KA9IA;;AAgJA;AACA,YAjJA,oBAiJA,CAjJA,EAiJA;AACA;AACA;AACA;AACA,wBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,sBAFA;AAGA,iCAHA;AAIA,uBAJA;AAKA,uCALA;AAMA,uCANA;AAOA,6BAPA;AAQA,8BARA;AASA,sBATA;;AAWA;AACA;AACA;AACA,wCADA;AAEA,8CAFA;AAGA;AACA,4CAJA;AAKA;AACA,8CANA;AAOA;AACA,gDARA;AASA;AACA,4CAVA;AAWA;AACA;AACA;AACA;AACA;AACA,iCADA;;AAGA,eAlBA;AAmBA;AACA;AACA,+BADA;AAEA,8BAFA;;AAIA;AACA,iCADA;;AAGA,eA3BA;;AA6BA;AACA,SAhCA;AAiCA;AACA,KAzMA;;AA2MA;AACA,WA5MA,mBA4MA,CA5MA,EA4MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAPA,CAOA;AACA,yDARA,CAQA;;AAEA,6DAVA,CAUA;;AAEA,wDAZA,CAYA;;AAEA;AACA,6DADA;;AAGA,KA7NA;;AA+NA,gBA/NA,0BA+NA;AACA;AACA,oBADA;AAEA,kBAFA;;AAIA;AACA,+BADA;AAEA,+BAFA;AAGA,oBAHA;;;AAMA;AACA;AACA;;AAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BADA;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAPA;AAQA;AACA,4DADA;AAEA,wCAFA;;AAIA,SAtBA,MAsBA;AACA;AACA,+BADA;AAEA,wBAFA;;AAIA;AACA,OA7BA;AA8BA,KAxRA;;AA0RA,aA1RA,qBA0RA,CA1RA,EA0RA;AACA;AACA;AACA,mBADA;;AAGA,eAHA,mBAGA,GAHA,EAGA;AACA;AACA,yBADA;;AAGA,SAPA;;AASA;AACA;;SAtSA,EA9FA,E;;;;;;;;;;;;;ACnKA;AAAA;AAAA;AAAA;AAAm8B,CAAgB,65BAAG,EAAC,C;;;;;;;;;;;ACAv9B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/order/orderListCity/orderListCity.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/order/orderListCity/orderListCity.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./orderListCity.vue?vue&type=template&id=4c20d1b5&\"\nvar renderjs\nimport script from \"./orderListCity.vue?vue&type=script&lang=js&\"\nexport * from \"./orderListCity.vue?vue&type=script&lang=js&\"\nimport style0 from \"./orderListCity.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order/orderListCity/orderListCity.vue\"\nexport default component.exports","export * from \"-!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderListCity.vue?vue&type=template&id=4c20d1b5&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderListCity.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderListCity.vue?vue&type=script&lang=js&\"","<template>\n    <!-- pages/Order/Order.wxml -->\n    <!-- <web-view src=\"https://xssj.letterbook.cn/?active={{active}}#/orderList\"></web-view> -->\n    <view class=\"order\">\n        <view class=\"tabs\">\n            <van-tabs :active=\"tabsitem\" @change=\"onChange\" sticky color=\"#EB5E32\" line-width=\"22\">\n                <view :src=\"item\" v-for=\"(item, index) in tabsList\" :key=\"index\">\n                    <van-tab :title=\"item.name\">\n                        <view class=\"order-list-container\">\n                            <!-- 商品列表 -->\n                            <view class=\"order-content\" :data-uniqueid=\"item.uniqueId\" v-if=\"item.orderCommodity.length != 0\" v-for=\"(item, index1) in orderList\" :key=\"index1\">\n                                <!-- 店铺名称、商品状态 -->\n\n                                <view class=\"order-title\">\n                                    <view class=\"store-content\">\n                                        <image :src=\"item.logoPic\" class=\"store_icon\" style=\"border-radius: 50%\" />\n                                        <view class=\"store-name-content\">\n                                            <view class=\"store-name\">{{ item.nickName }}</view>\n                                            <!-- <image src=\"../../img/jinru.png\" class=\"jinru\" /> -->\n                                        </view>\n                                    </view>\n                                    <view class=\"order-status\">\n                                        <van-count-down\n                                            v-if=\"tabsitem == 0\"\n                                            :time=\"item.endTime\"\n                                            format=\"待支付 mm:ss\"\n                                            @finish=\"countDownOver($event, { uniqueid: item.uniqueId, marchantId: item.marchantId })\"\n                                            :data-uniqueid=\"item.uniqueId\"\n                                            :data-marchantId=\"item.marchantId\"\n                                        />\n                                        <view v-if=\"tabsitem == 1\">待接单</view>\n                                        <view v-if=\"tabsitem == 2\">待收货</view>\n                                        <view v-if=\"tabsitem == 3\">已完成</view>\n                                        <view v-if=\"tabsitem == 4\">已退款</view>\n                                    </view>\n                                </view>\n\n                                <!-- 商品主体 商品图片 名称 价格 数量 -->\n\n                                <view class=\"order-id\">\n                                    订单号:{{ item.orderNumber }}\n                                    <image @tap=\"copyOrder\" class=\"copy_img\" src=\"/static/pages/static/copy.png\" :data-order=\"item.orderNumber\"></image>\n                                </view>\n\n                                <view class=\"goods-content\" v-for=\"(items, key) in item.orderCommodity\" :key=\"items.key\">\n                                    <van-image :src=\"items.thumbnail\" width=\"77px\" height=\"77px\" fit=\"cover\" radius=\"10rpx;\"></van-image>\n\n                                    <view class=\"goods-item\">\n                                        <view class=\"goods-name\">{{ items.commodityName }}</view>\n                                        <view class=\"spec-content\">\n                                            <view class=\"spec-container\">规格：{{ items.tempSpecName }}</view>\n                                        </view>\n                                        <view class=\"goods_price_content\">\n                                            <view class=\"goods_price\">￥{{ items.paymentMoney }}</view>\n                                            <!-- <view class=\"comment-btn\" catchtap=\"comment\" wx:if=\"{{tabsList[tabsitem].name==='已完成'&&items.singleEvaluate===0}}\" data-orderIdx=\"{{index}}\" data-goodsIdx=\"{{key}}\">评价几句</view> -->\n                                        </view>\n                                    </view>\n                                </view>\n\n                                <!-- 商品总价格、总数量 -->\n\n                                <view class=\"goods-total\">\n                                    <view class=\"total-span\">\n                                        <view class=\"sale_money\" v-if=\"item.paymentMoney != item.actualMoney\">\n                                            <text>总价：￥{{ item.paymentMoney }}，</text>\n                                            <text>优惠价：￥{{ item.paymentMoney - item.actualMoney }}</text>\n                                        </view>\n                                        <text>实付款：￥{{ item.actualMoney }}</text>\n                                    </view>\n                                </view>\n\n                                <!-- 下单时间 人数 餐桌号 -->\n\n                                <view class=\"goods-time-box\">\n                                    <view class=\"item-box flex-style\">\n                                        <view style=\"display: flex\">\n                                            <view>下单时间：</view>\n                                            <view>{{ item.orderTime }}</view>\n                                        </view>\n                                        <view v-if=\"item.autoVerification\" class=\"is-auto\">自动结算</view>\n                                    </view>\n                                    <view class=\"item-box\">\n                                        <view>收货地址：</view>\n                                        <view>\n                                            {{ item.shippingAddress.provincesName }}{{ item.shippingAddress.provincesName }}{{ item.shippingAddress.areaName\n                                            }}{{ item.shippingAddress.address }}\n                                        </view>\n                                    </view>\n                                    <view class=\"item-box\" v-if=\"item.expressCompany\">\n                                        <view>快递公司：</view>\n                                        <view>{{ item.expressCompany }}</view>\n                                    </view>\n                                    <view class=\"item-box\" v-if=\"item.expressNo\">\n                                        <view>快递单号：</view>\n                                        <view>{{ item.expressNo }}</view>\n                                    </view>\n                                    <view class=\"item-box\" v-if=\"item.refundReason\">\n                                        <view>拒绝原因：</view>\n                                        <view>{{ item.refundReason }}</view>\n                                    </view>\n                                    <view class=\"item-box\">\n                                        <view style=\"white-space: nowrap\">留言：</view>\n                                        <view>{{ item.message ? item.message : '你没有任何留言~' }}</view>\n                                    </view>\n                                </view>\n\n                                <!-- 底部订单操作按钮 -->\n\n                                <view class=\"order-footer\">\n                                    <view class=\"btn-content-box\">\n                                        <navigator\n                                            class=\"do-btn cancel-btn other_btn\"\n                                            :url=\"'/pages/order/contact/contact?logoPic=' + item.logoPic + '&marchantId=' + item.marchantId + '&marchantName=' + item.nickName\"\n                                        >\n                                            联系卖家\n                                        </navigator>\n                                        <view\n                                            class=\"do-btn cancel-btn other_btn\"\n                                            v-if=\"tabsList[tabsitem].name === '待付款'\"\n                                            @tap.stop.prevent=\"updateCityOrder\"\n                                            :data-uniqueId=\"item.uniqueId\"\n                                            data-id=\"3\"\n                                            :data-marchantId=\"item.marchantId\"\n                                        >\n                                            取消订单\n                                        </view>\n                                        <view class=\"do-btn submit-btn\" v-if=\"tabsList[tabsitem].name === '待付款'\" @tap.stop.prevent=\"payOrder\" :data-item=\"item\">支付订单</view>\n                                        <view class=\"do-btn cancel-btn other_btn\" v-if=\"tabsitem == 1\" @tap.stop.prevent=\"refundApply\" :data-uniqueId=\"item.uniqueId\">\n                                            申请退款\n                                        </view>\n                                        <view\n                                            class=\"do-btn submit-btn\"\n                                            v-if=\"tabsList[tabsitem].name === '待收货'\"\n                                            @tap.stop.prevent=\"updateCityOrder\"\n                                            :data-uniqueId=\"item.uniqueId\"\n                                            data-id=\"4\"\n                                            :data-marchantId=\"item.marchantId\"\n                                        >\n                                            确认收货\n                                        </view>\n                                    </view>\n                                </view>\n                            </view>\n                        </view>\n                        <to-bottom v-if=\"toBottom\" />\n                    </van-tab>\n                </view>\n            </van-tabs>\n        </view>\n    </view>\n</template>\n\n<script>\n// import vanTab from './@vant/weapp/tab/index';\n// import vanTabs from './@vant/weapp/tabs/index';\n// import vanImage from './@vant/weapp/image/index';\nimport toBottom from '../../Component/toBottom/index';\n// import vanPopup from './@vant/weapp/popup/index';\n// import vanCountDown from '../../../miniprogram_npm/@vant/weapp/count-down/index';\n// pages/Order/Order.js\nconst time = require('../../../utils/util');\n\nconst app = getApp();\nexport default {\n    components: {\n        // vanTab,\n        // vanTabs,\n        // vanImage,\n        toBottom,\n        // vanPopup,\n        // vanCountDown\n    },\n    data() {\n        return {\n            // active: 0\n            pageCurr: 1,\n\n            pageSize: 10,\n            toBottom: false,\n            isSubmit: false,\n            tabsList: [],\n\n            tabList: [\n                {\n                    name: '待付款'\n                },\n                {\n                    name: '待接单'\n                },\n                {\n                    name: '待收货'\n                },\n                {\n                    name: '已完成'\n                },\n                {\n                    name: '已退款'\n                }\n            ],\n\n            tabsitem: 0,\n            marchantId: 0,\n            orderList: [],\n            name: ''\n        };\n    },\n    /**\n     * 生命周期函数--监听页面加载\n     */\n    onLoad: function (options) {\n        if (options.tabsitem) {\n            this.setData({\n                tabsitem: parseInt(options.tabsitem)\n            });\n        }\n\n        if (options.marchantId) {\n            this.setData({\n                marchantId: parseInt(options.marchantId)\n            });\n        }\n\n        this.setData({\n            // 防止触发onChange事件\n            tabsList: this.tabList\n        });\n    },\n    /**\n     * 生命周期函数--监听页面初次渲染完成\n     */\n    onReady: function () {},\n    /**\n     * 生命周期函数--监听页面显示\n     */\n    onShow: function () {\n        this.getParam();\n    },\n    /**\n     * 生命周期函数--监听页面隐藏\n     */\n    onHide: function () {},\n    /**\n     * 生命周期函数--监听页面卸载\n     */\n    onUnload: function () {},\n    /**\n     * 页面相关事件处理函数--监听用户下拉动作\n     */\n    onPullDownRefresh: function () {},\n    /**\n     * 页面上拉触底事件的处理函数\n     */\n    onReachBottom: function () {\n        if (this.toBottom == false) {\n            this.getOrderList();\n        }\n    },\n    methods: {\n        // 获取页面参数\n        getParam() {\n            this.clearData();\n            this.getOrderList();\n        },\n\n        //切换订单状态\n        onChange(e) {\n            this.clearData();\n            var index = e.detail.index;\n            this.setData({\n                tabsitem: index\n            });\n            this.clearData();\n            this.getOrderList();\n        },\n\n        //清空数据\n        clearData() {\n            this.setData({\n                pageCurr: 1,\n                orderList: [],\n                toBottom: false\n            });\n        },\n\n        // 配送订单操作\n        updateCityOrder(e) {\n            var that = this;\n            var ev = e.currentTarget.dataset;\n            let data = {\n                uniqueId: ev.uniqueid,\n                orderState: ev.id,\n                marchantId: ev.marchantid,\n                orderType: 2\n            };\n            var text;\n            var notice;\n            switch (parseInt(ev.id)) {\n                case 3:\n                    text = '确认取消订单吗？';\n                    notice = '取消成功';\n                    break;\n\n                case 4:\n                    text = '确认收货吗？';\n                    notice = '已确认收货';\n                    break;\n            }\n\n            if (ev.id != 2) {\n                uni.showModal({\n                    title: '提示',\n                    content: text,\n                    success: function (sm) {\n                        if (sm.confirm) {\n                            // 用户点击了确定 可以调用删除方法了\n                            app.globalData.sjrequest('/order/updateCityOrder', data).then((res) => {\n                                if (res.data.code == 200) {\n                                    uni.showToast({\n                                        title: notice,\n                                        duration: 1000\n                                    });\n                                    setTimeout((res) => {\n                                        that.clearData();\n                                        that.getOrderList();\n                                    }, 1000);\n                                }\n                            });\n                        } else if (sm.cancel) {\n                            console.log('用户点击取消');\n                        }\n                    }\n                });\n            }\n        },\n\n        // 申请退款\n        refundApply(e) {\n            var that = this;\n            var ev = e.currentTarget.dataset;\n            let data = {\n                uniqueId: ev.uniqueid,\n                applet: 2,\n                payPlatform: 'JSAPI'\n            };\n            uni.showModal({\n                title: '提示',\n                content: '确认申请退款吗？',\n                success: function (sm) {\n                    if (sm.confirm) {\n                        // 用户点击了确定 可以调用删除方法了\n                        app.globalData.sjrequest('/order/operateCityRefund', data).then((res) => {\n                            if (res.data.code == 200) {\n                                uni.showToast({\n                                    title: '退款成功',\n                                    duration: 2000\n                                });\n                                setTimeout((res) => {\n                                    that.setData({\n                                        tabsitem: 4\n                                    });\n                                    that.clearData();\n                                    that.getOrderList();\n                                }, 2000);\n                            }\n                        });\n                    } else if (sm.cancel) {\n                        console.log('用户点击取消');\n                    }\n                }\n            });\n        },\n\n        //倒计时结束\n        countDownOver(e, _dataset) {\n            /* ---处理dataset begin--- */\n            this.datasetHandle(e, _dataset);\n            /* ---处理dataset end--- */\n            let that = this;\n            console.log(e.currentTarget.dataset);\n            let data = {\n                uniqueId: e.currentTarget.dataset.uniqueid,\n                orderState: 3,\n                marchantId: e.currentTarget.dataset.marchantid\n            };\n            app.globalData.sjrequest('/order/updateCityOrder', data).then((res) => {\n                if (res.data.code == 200) {\n                    uni.showToast({\n                        title: '已自动为您取消订单',\n                        icon: 'none',\n                        duration: 2000,\n                        success: function () {\n                            that.setData({\n                                tabsitem: 4\n                            });\n                            that.getParam();\n                        }\n                    });\n                }\n            });\n        },\n\n        // 支付订单\n        payOrder(e) {\n            if (!this.isSubmit) {\n                // 防止多次点击\n                this.setData({\n                    isSubmit: true\n                });\n                var item = e.currentTarget.dataset.item;\n                var that = this;\n                console.log(item);\n                let merchantId = uni.getStorageSync('merchantId');\n                let appid = uni.getStorageSync('appid');\n                let data = {\n                    marchantId: merchantId,\n                    appid: appid,\n                    uniqueId: item.uniqueId,\n                    paymentWay: 2,\n                    actualMoney: item.actualMoney,\n                    orderNumber: item.orderNumber,\n                    body: item.nickName,\n                    payPlatform: 'JSAPI',\n                    orderType: 2\n                };\n                app.globalData.sjrequest('/order/paymentOrder', data).then((res) => {\n                    if (res.data.code == 200) {\n                        uni.requestPayment({\n                            appId: res.data.data.appId,\n                            nonceStr: res.data.data.nonceStr,\n                            // 支付签名随机串，不长于 32 位\n                            package: res.data.data.package,\n                            // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\n                            signType: res.data.data.signType,\n                            // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\n                            timeStamp: res.data.data.timeStamp,\n                            // 支付签名时间戳，\n                            paySign: res.data.data.paySign,\n                            // 支付签名\n                            success: function (res) {\n                                that.clearData();\n                                that.getOrderList();\n                                that.setData({\n                                    isSubmit: false\n                                });\n                            },\n                            fail: function (res) {\n                                uni.showToast({\n                                    title: '支付失败',\n                                    icon: 'none'\n                                });\n                                that.setData({\n                                    isSubmit: false\n                                });\n                            }\n                        });\n                    }\n                });\n            }\n        },\n\n        // 评论\n        comment(e) {\n            let orderIdx = e.currentTarget.dataset.orderidx;\n            let goodsIdx = e.currentTarget.dataset.goodsidx;\n            let goodsData = this.orderList[orderIdx].orderCommodity[goodsIdx];\n            let orderList = this.orderList[orderIdx];\n            app.globalData.marchantId = orderList.marchantId;\n            //商家id\n            app.globalData.commodityId = goodsData.commodityId; //商品id\n            app.globalData.commodityLogo = goodsData.thumbnail; //商品图片\n\n            app.globalData.commodityName = goodsData.commodityName; //商品名称\n\n            app.globalData.orderUniqueId = goodsData.uniqueId; //订单uid\n\n            uni.navigateTo({\n                url: '/pages/order/postGoodsComment/postGoodsComment'\n            });\n        },\n\n        getOrderList() {\n            uni.showLoading({\n                title: '加载中',\n                mask: true\n            });\n            let data = {\n                pageCurr: this.pageCurr,\n                pageSize: this.pageSize,\n                orderType: 2\n            };\n\n            if (this.marchantId) {\n                data.marchantId = this.marchantId;\n            }\n\n            if (this.tabsitem == 0) {\n                data.orderState = 0;\n            } else if (this.tabsitem == 1) {\n                data.orderState = 7;\n            } else if (this.tabsitem == 2) {\n                data.orderState = 2;\n            } else if (this.tabsitem == 3) {\n                data.orderState = 4;\n            } else if (this.tabsitem == 4) {\n                data.orderState = 3;\n            }\n\n            app.globalData.sjrequest('/order/queryWintookOrder', data).then((res) => {\n                if (res.data.code == 200) {\n                    uni.hideLoading();\n                    var timestamp = Date.parse(new Date());\n\n                    if (res.data.data.length < this.pageSize) {\n                        this.setData({\n                            toBottom: true\n                        });\n                    }\n\n                    res.data.data.forEach((item) => {\n                        item.orderTime = time.formatTimeSec(item.orderTime, 'Y-M-D h:m:s');\n                        item.endTime = item.endTime * 1000 - timestamp;\n\n                        if (item.shippingAddress) {\n                            item.shippingAddress = JSON.parse(item.shippingAddress);\n                        }\n                    });\n                    this.setData({\n                        orderList: res.data.data.concat(this.orderList),\n                        pageCurr: this.pageCurr + 1\n                    });\n                } else {\n                    uni.showToast({\n                        title: res.data.msg,\n                        icon: 'none'\n                    });\n                }\n            });\n        },\n\n        copyOrder(e) {\n            var order = e.currentTarget.dataset.order;\n            uni.setClipboardData({\n                data: order,\n\n                success(res) {\n                    uni.showToast({\n                        title: '复制成功'\n                    });\n                }\n            });\n        }\n        /**\n         * 用户点击右上角分享\n         */\n    }\n};\n</script>\n<style>\n/* pages/Order/Order.wxss */\n.order {\n    min-height: 100vh;\n    background: #f9f9f9;\n}\n.order .tabs .order-list-container {\n    /* padding: 0 20rpx;\n  box-sizing: border-box; */\n}\n.order .tabs .order-list-container .order-content {\n    width: 100%;\n    background: rgba(229, 228, 229, 0.1);\n    box-shadow: 0rpx 6rpx 10rpx rgba(66, 41, 41, 0.1);\n    /* border-radius: 20rpx; */\n    margin-top: 20rpx;\n    padding: 0 30rpx;\n    box-sizing: border-box;\n    background-color: #fff;\n}\n.order .tabs .order-list-container .order-content .order-title {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1rpx solid #ececec;\n}\n.order-id {\n    padding: 20rpx 0;\n    box-sizing: border-box;\n    font-size: 22rpx;\n    font-family: PingFang SC;\n    font-weight: 500;\n    color: #999999;\n}\n.order .tabs .order-list-container .order-content .order-title .order-status {\n    height: 40rpx;\n    font-size: 24rpx;\n    font-family: PingFang SC;\n    font-weight: 400;\n    line-height: 40rpx;\n    color: #eb5e32;\n    opacity: 1;\n}\n.order .tabs .order-list-container .order-content .store-content {\n    display: flex;\n    height: 80rpx;\n    align-items: center;\n}\n.order .tabs .order-list-container .order-content .store-content .store_icon {\n    width: 34.16rpx;\n    height: 32.44rpx;\n}\n.order .tabs .order-list-container .order-content .store-content .store-name-content {\n    display: flex;\n    align-items: center;\n}\n.order .tabs .order-list-container .order-content .store-content .store-name-content .store-name {\n    height: 40rpx;\n    font-size: 30rpx;\n    font-family: PingFang SC;\n    font-weight: 500;\n    line-height: 42rpx;\n    color: #333;\n    opacity: 1;\n    margin-left: 10rpx;\n    max-width: 400rpx;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    word-break: break-all;\n    word-wrap: break-word;\n}\n.order .tabs .order-list-container .order-content .store-content .store-name-content .jinru {\n    width: 10rpx;\n    height: 20rpx;\n    margin-left: 14rpx;\n}\n.order .tabs .order-list-container .order-content .goods-content {\n    width: 100%;\n    display: flex;\n}\n.order .tabs .order-list-container .order-content .goods-content /deep/ .van-image .van-image__img {\n    border-radius: 10rpx;\n}\n.order .tabs .order-list-container .order-content .goods-content .goods-item {\n    width: 0;\n    flex: 1;\n    height: 154rpx;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    margin-left: 20rpx;\n}\n.order .tabs .order-list-container .order-content .goods-content .goods-item .goods-name {\n    width: 100%;\n    font-size: 32rpx;\n    font-family: PingFang SC;\n    font-weight: 500;\n    color: #333;\n    line-height: 38rpx;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    word-break: break-all;\n    word-wrap: break-word;\n}\n.order .tabs .order-list-container .order-content .goods-content .goods-item .spec-content {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    align-items: space-between;\n}\n.order .tabs .order-list-container .order-content .goods-content .goods-item .spec-content .spec-container {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 22rpx;\n    font-family: PingFang SC;\n    font-weight: 400;\n    color: #999;\n    opacity: 1;\n}\n.order .tabs .order-list-container .order-content .goods-content .goods-item .spec-content .refund {\n    font-size: 22rpx;\n    font-family: PingFang SC;\n    font-weight: 500;\n    color: #f74c54;\n}\n.order .tabs .order-list-container .order-content .goods-content .goods-item .goods_price_content {\n    width: 100%;\n    display: flex;\n    align-items: flex-end;\n    justify-content: space-between;\n}\n.order .tabs .order-list-container .order-content .goods-content .goods-item .goods_price_content .goods_price {\n    font-size: 26rpx;\n    font-family: PingFang SC;\n    font-weight: 500;\n    color: #ec1919;\n}\n.comment-btn {\n    width: 120rpx;\n    height: 40rpx;\n    border: 1rpx solid #cccccc;\n    border-radius: 10rpx;\n    font-size: 24rpx;\n    font-family: PingFang SC;\n    font-weight: 400;\n    color: #999999;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.order .tabs .order-list-container .order-content .goods-content .goods-item .goods_price_content .goods_num {\n    font-size: 28rpx;\n    font-family: PingFang SC;\n    font-weight: 500;\n    color: #999;\n}\n.order .tabs .order-list-container .order-content .goods-total {\n    width: 100%;\n    text-align: right;\n    /* padding: 0 42rpx; */\n    /* box-sizing: border-box; */\n    border-bottom: 1rpx solid #cecece;\n    padding-bottom: 20rpx;\n}\n.order .tabs .order-list-container .order-content .goods-total .total-span {\n    height: 24rpx;\n    font-size: 26rpx;\n    font-family: PingFang SC;\n    font-weight: 500;\n    color: #333333;\n    display: flex;\n    justify-content: flex-end;\n}\n.order .tabs .order-list-container .order-content .goods-time-box {\n    width: 100%;\n    /* display: flex; */\n    /* align-items: center; */\n    /* justify-content: space-between; */\n}\n.order .tabs .order-list-container .order-content .goods-time-box .item-box {\n    display: flex;\n    align-items: center;\n    font-size: 22rpx;\n    font-family: PingFang SC;\n    font-weight: 500;\n    color: #333;\n    line-height: 24rpx;\n    padding: 15rpx 0;\n}\n.flex-style {\n    justify-content: space-between;\n}\n.is-auto {\n    width: 116rpx;\n    height: 34rpx;\n    background: #efefef;\n    border-radius: 17rpx;\n    font-size: 22rpx;\n    font-family: PingFang SC;\n    font-weight: 500;\n    color: #999999;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.order .tabs .order-list-container .order-content .order-footer {\n    margin-top: 20rpx;\n}\n.order .tabs .order-list-container .order-content .order-footer .btn-content-box {\n    width: 100%;\n    text-align: right;\n    padding-right: 20rpx;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    padding-bottom: 20rpx;\n}\n.order .tabs .order-list-container .order-content .order-footer .do-btn {\n    width: 170rpx;\n    height: 60rpx;\n    text-align: center;\n    line-height: 60rpx;\n    border-radius: 30rpx;\n    font-size: 28rpx;\n    font-family: PingFang SC;\n    font-weight: 500;\n}\n.order .tabs .order-list-container .order-content .order-footer .cancel-btn {\n    color: #999;\n    border: 1rpx solid #cccccc;\n    opacity: 1;\n}\n.order .tabs .order-list-container .order-content .order-footer .other_btn {\n    margin-right: 18rpx;\n}\n.order .tabs .order-list-container .order-content .order-footer .submit-btn {\n    border: 1rpx solid #ed5757;\n    color: #ed5757;\n}\n.QR-top {\n    width: 100%;\n    padding: 30rpx;\n    box-sizing: border-box;\n    background: #f9f9f9;\n    border-radius: 8px 8px 0px 0px;\n    font-size: 30rpx;\n    font-family: PingFang SC;\n    font-weight: 400;\n    line-height: 40rpx;\n    color: #333333;\n}\n.click-number {\n    text-align: center;\n    height: 34rpx;\n    font-size: 24rpx;\n    font-family: PingFang SC;\n    font-weight: 400;\n    line-height: 34rpx;\n    color: #bbbbbb;\n}\n.clicked-number {\n    height: 34rpx;\n    font-size: 24rpx;\n    font-family: PingFang SC;\n    font-weight: 400;\n    line-height: 34rpx;\n    color: #333333;\n    letter-spacing: 20rpx;\n    text-align: center;\n}\n.van-count-down {\n    color: #eb5e32 !important;\n}\n.copy_img {\n    width: 40rpx;\n    height: 40rpx;\n}\n.sale_money {\n    padding-right: 10rpx;\n    color: #999999;\n}\n</style>\n","import mod from \"-!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderListCity.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./orderListCity.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1659404704862\n      var cssReload = require(\"D:/hbuild/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}