{"version":3,"sources":["uni-app:///main.js","webpack:///D:/products/xssj_New_basic_uni/pages/businessActivity/activityShop/activityShop.vue?f93d","webpack:///D:/products/xssj_New_basic_uni/pages/businessActivity/activityShop/activityShop.vue?61a1","webpack:///D:/products/xssj_New_basic_uni/pages/businessActivity/activityShop/activityShop.vue?0768","webpack:///D:/products/xssj_New_basic_uni/pages/businessActivity/activityShop/activityShop.vue?2f4c","uni-app:///pages/businessActivity/activityShop/activityShop.vue","webpack:///D:/products/xssj_New_basic_uni/pages/businessActivity/activityShop/activityShop.vue?80c2","webpack:///D:/products/xssj_New_basic_uni/pages/businessActivity/activityShop/activityShop.vue?4bd9"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,mI,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,qBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACa;;;AAGxE;AAC6K;AAC7K,gBAAgB,oLAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA2pB,CAAgB,ypBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4E/qB,mB;AACA;AACA;AACA;AACA;AACA;AACA,wBAJA;AAKA,4BALA,EADA;;AAQA,MARA,kBAQA;AACA;AACA,eADA;;AAGA;AACA,oBAJA;;AAMA;AACA,kBAPA;;AASA,gBATA;AAUA,oBAVA;AAWA,kBAXA;;AAaA;AACA,cADA;AAEA,iBAFA;AAGA,wBAHA;AAIA,kBAJA;AAKA,wBALA,EAbA;;;AAqBA,GA9BA;AA+BA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BADA;;AAGA;;AAEA;AACA;AACA,gCADA;;AAGA;AACA,GA3DA;AA4DA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,8BADA;;AAGA;;AAEA;AACA;AACA,kBAFA;AAGA;AACA;AACA,yBADA;;AAGA,OAPA;;AASA;AACA,GAnFA;AAoFA;;;AAGA;AACA;AACA;AACA;AACA,GA3FA;AA4FA;;;AAGA,8BA/FA;AAgGA;;;AAGA,kCAnGA;AAoGA;;;AAGA;AACA;AACA,GAzGA;AA0GA;;;AAGA;AACA,WADA,GACA,IADA,CACA,OADA,CACA,OADA,GACA,IADA,CACA,OADA;;AAGA;AACA;AACA;AACA;AACA,wBADA,EADA;;AAIA;AACA;AACA,OANA;;AAQA;AACA,GA3HA;AA4HA;;;AAGA;AACA;AACA;AACA,wEADA;;AAGA,GApIA;AAqIA;AACA,iBAtIA,6BAsIA;AACA;AACA,0FADA;;AAGA,GA1IA;AA2IA;AACA,YADA,oBACA,CADA,EACA;AACA;AACA;AACA,+FADA;;AAGA,KANA;;AAQA,kBARA,0BAQA,CARA,EAQA;AACA;AACA;AACA;AACA;AACA;AACA,8GADA;;AAGA,KAhBA;;AAkBA,cAlBA,sBAkBA,GAlBA,EAkBA,OAlBA,EAkBA;AACA;AACA;AACA;AACA;AACA,KAvBA;;AAyBA,sBAzBA,gCAyBA;AACA;AACA;AACA;AACA,sDADA;AAEA;AACA;AACA,aAJA;;AAMA,SAPA,EAOA,GAPA;AAQA;AACA,KApCA;;AAsCA;AACA,kBAvCA,4BAuCA;AACA;AACA,gBADA,CACA,4BADA,EACA;AACA,+BADA;AAEA,iCAFA;AAGA,mCAHA;AAIA;AACA,yCALA;AAMA,2BANA,EADA;;AASA,UATA,CASA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,aAJA,MAIA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,qBADA;AAEA,sBAFA;AAGA,wBAHA;AAIA,wBAJA;;AAMA;AACA;AACA;AACA;AACA;AACA,WAzBA;;AA2BA;AACA;AACA,WAFA,MAEA;AACA;AACA;;AAEA;AACA;AACA,8BADA,EADA;;AAIA;AACA;AACA,WANA;;AAQA;AACA,OA3DA;AA4DA,KApGA;;AAsGA,eAtGA,yBAsGA;AACA;AACA;AACA,sBADA;AAEA,kBAFA,EADA;;AAKA;AACA;AACA,OAPA;;AASA,KAhHA;;AAkHA,eAlHA,uBAkHA,CAlHA,EAkHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBADA;;AAGA,KA5HA;;AA8HA,cA9HA,sBA8HA,CA9HA,EA8HA,QA9HA,EA8HA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,sBADA;;AAGA,KAxJA;;AA0JA,aA1JA,qBA0JA,CA1JA,EA0JA,QA1JA,EA0JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,wBADA;;AAGA;AACA,KA9KA;;AAgLA,sBAhLA,8BAgLA,SAhLA,EAgLA;AACA;AACA;;AAEA;AACA;AACA,kBADA,CACA,gCADA,EACA;AACA,gCADA;AAEA,8BAFA,EADA;;AAKA,YALA,CAKA;AACA;AACA;AACA;AACA,SATA;AAUA;AACA,KAhMA;;AAkMA,wBAlMA,kCAkMA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA;AACA;AACA;AACA,wBADA,CACA,mBADA,EACA;AACA;AACA,6CADA;AAEA,mCAFA;AAGA,sCAHA;AAIA,4BAJA;AAKA,6BALA;AAMA,yBANA,EADA,CADA;;;AAWA,kBAXA,CAWA;AACA;AACA;AACA,iCADA;AAEA,gCAFA;;AAIA;AACA,eAlBA;AAmBA;AACA,WAxBA;;AA0BA,OA5BA;AA6BA,KAjOA;;AAmOA,2BAnOA,mCAmOA,CAnOA,EAmOA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA;AACA;AACA;AACA,wBADA,CACA,mBADA,EACA;AACA;AACA,6CADA;AAEA,mCAFA;AAGA,sCAHA;AAIA,+BAJA;AAKA,6BALA;AAMA,yBANA,EADA,CADA;;;AAWA,kBAXA,CAWA;AACA;AACA;AACA,iCADA;AAEA,gCAFA;;AAIA;AACA,eAlBA;AAmBA;AACA,WAxBA;;AA0BA,OA3BA;AA4BA,KAlQA,EA3IA,E;;;;;;;;;;;;;AC7EA;AAAA;AAAA;AAAA;AAAk8B,CAAgB,45BAAG,EAAC,C;;;;;;;;;;;ACAt9B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/businessActivity/activityShop/activityShop.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/businessActivity/activityShop/activityShop.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./activityShop.vue?vue&type=template&id=0e8ba868&\"\nvar renderjs\nimport script from \"./activityShop.vue?vue&type=script&lang=js&\"\nexport * from \"./activityShop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./activityShop.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/businessActivity/activityShop/activityShop.vue\"\nexport default component.exports","export * from \"-!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activityShop.vue?vue&type=template&id=0e8ba868&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activityShop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activityShop.vue?vue&type=script&lang=js&\"","<template>\n    <view>\n        <view class=\"activity-list-container me-fx-col\">\n            <block v-for=\"(item, index) in dataList\" :key=\"index\">\n                <view :class=\"'activity-list-info me-fx-col activity-' + item.activityId\" @tap=\"toDetail\" :data-atyid=\"item.activityId\">\n                    <view class=\"activity-top\">\n                        <image mode=\"aspectFill\" class=\"activity-img\" :src=\"item.imageUrl\"></image>\n                        <view class=\"me-fx-row me-fx-sb-c activity-num down-order-num\" v-if=\"item.activityJoinNumberTotal\">\n                            <text class=\"triangle-box\"></text>\n                            <text class=\"btn_last\">已有{{ item.activityJoinNumberTotal }}人下单</text>\n                        </view>\n                        <view class=\"me-fx-row me-fx-sb-c activity-num\" v-if=\"item.residueNumber != -1\">\n                            <text class=\"triangle-box\"></text>\n                            <text class=\"btn_last\">{{ '剩余名额：' + (item.residueNumber || 0) }}</text>\n                        </view>\n                    </view>\n                    <view class=\"activity-foot\">\n                        <view style=\"padding: 10rpx; box-sizing: border-box\">\n                            <view class=\"me-fx-row me-fx-sb-c foot-line-item\">\n                                <text class=\"me-full-text activity-shop-name\">活动名称：{{ item.templateName }}</text>\n                                <van-count-down\n                                    :time=\"item.diffTimes\"\n                                    @change=\"timeChange($event, { atyid: item.activityId, index })\"\n                                    :auto-start=\"true\"\n                                    :use-slot=\"true\"\n                                    @finish=\"finishFun($event, { atyid: item.activityId, index })\"\n                                    :data-atyid=\"item.activityId\"\n                                    :data-index=\"index\"\n                                >\n                                    <view class=\"me-fx-row me-fx-start-c times-text\">\n                                        <text>{{ item.state == 1 ? '距开始' : '距结束' }}：</text>\n                                        <view class=\"time-num\" v-if=\"item.times.days\">{{ item.times.days }}</view>\n                                        <text v-if=\"item.times.days\">天</text>\n                                        <view class=\"time-num\">{{ item.times.hours }}</view>\n                                        时\n                                        <view class=\"time-num\">{{ item.times.minutes }}</view>\n                                        分\n                                        <view class=\"time-num\">{{ item.times.seconds }}</view>\n                                        秒\n                                    </view>\n                                </van-count-down>\n                            </view>\n                            <view class=\"me-fx-row me-fx-sb-c foot-line-item\">\n                                <text class=\"me-full-text activity-goods-name\">{{ item.commodityName }}</text>\n                                <view class=\"me-fx-row me-fx-c-end price-box\">\n                                    <text>活动价:¥</text>\n                                    <text class=\"price-num\">{{ item.lowPrice }}</text>\n                                </view>\n                            </view>\n                        </view>\n                        <view v-for=\"(temp, ti) in item.meJoinInfo\" :key=\"temp.ti\">\n                            <view :class=\"'me-fx-row me-fx-sb-c msg-line-box ' + (temp.status == 2 || temp.status == 3 ? 'complete' : 'not-complete')\">\n                                <text v-if=\"temp.status == 2 || temp.status == 3\">您已完成{{ temp.alreadyOrder }}单任务，您购买商品已退还金额({{ item.meJoinInfo.income }}元)</text>\n                                <text v-else>已推{{ temp.alreadyOrder }}单，商品金额退还{{ temp.income }} 只差{{ temp.residueOrder }}单赚取商品</text>\n                                <text class=\"view-detail\" :data-item=\"temp\" @tap.stop.prevent=\"jumpJoinDetail\">查看详情</text>\n                            </view>\n                        </view>\n                    </view>\n                </view>\n            </block>\n            <view class=\"me-fx-row me-fx-c-c place-empty\" v-if=\"!dataList.length\">\n                <text>暂无数据</text>\n            </view>\n        </view>\n\n        <!-- 授权组件 -->\n        <!-- <auth-get-info></auth-get-info> -->\n    </view>\n</template>\n\n<script>\n// import vanTab from './@vant/weapp/tab/index';\n// import vanTabs from './@vant/weapp/tabs/index';\n// import vanCountDown from '../../../miniprogram_npm/@vant/weapp/count-down/index';\nimport countDown from '../components/countdown/countdown';\nimport authGetInfo from '../../Component/auth-get-info/auth-get-info';\nlet app = getApp();\nexport default {\n    components: {\n        // vanTab,\n        // vanTabs,\n        // vanCountDown,\n        countDown,\n        authGetInfo\n    },\n    data() {\n        return {\n            appid: '',\n\n            //小程序appid\n            merchantId: '',\n\n            //商家id\n            pageSize: 10,\n\n            pageNum: 1,\n            stopReq: false,\n            dataList: [],\n\n            temp: {\n                ti: '',\n                status: 0,\n                alreadyOrder: '',\n                income: '',\n                residueOrder: ''\n            }\n        };\n    },\n    /**\n     * 生命周期函数--监听页面加载\n     */\n    onLoad: function (options) {\n        var activityId = options.activityId;\n        var merchantId = options.merchantId;\n        var classId = options.classId;\n\n        if (activityId) {\n            this.activityId = activityId;\n        }\n\n        if (classId) {\n            this.classId = classId;\n        }\n\n        if (!merchantId) {\n            let merchantId = uni.getStorageSync('merchantId');\n            this.setData({\n                merchantId: merchantId\n            });\n        }\n\n        if (options.classname) {\n            uni.setNavigationBarTitle({\n                title: options.classname\n            });\n        }\n    },\n    /**\n     * 生命周期函数--监听页面初次渲染完成\n     */\n    onReady: function () {\n        var merchantId = uni.getStorageSync('merchantId');\n\n        if (merchantId) {\n            this.merchantId = merchantId;\n            this.setData({\n                merchantId: merchantId\n            });\n        }\n\n        uni.getStorage({\n            //获取小程序appid\n            key: 'appid',\n            success: (res) => {\n                this.setData({\n                    appid: res.data\n                });\n            }\n        });\n        this.getAllActivity();\n    },\n    /**\n     * 生命周期函数--监听页面显示\n     */\n    onShow: function () {\n        if (this.merchantId) {\n            this.getAllActivity();\n        }\n    },\n    /**\n     * 生命周期函数--监听页面隐藏\n     */\n    onHide: function () {},\n    /**\n     * 生命周期函数--监听页面卸载\n     */\n    onUnload: function () {},\n    /**\n     * 页面相关事件处理函数--监听用户下拉动作\n     */\n    onPullDownRefresh: function () {\n        this.refreshList();\n    },\n    /**\n     * 页面上拉触底事件的处理函数\n     */\n    onReachBottom: function () {\n        var { pageNum, stopReq } = this;\n\n        if (!stopReq) {\n            pageNum++;\n            this.setData(\n                {\n                    pageNum\n                },\n                () => {\n                    this.getAllActivity();\n                }\n            );\n        }\n    },\n    /**\n     * 用户点击右上角分享\n     */\n    onShareAppMessage: function () {\n        var query = `activityId=${this.activityId}&merchantId=${this.merchantId}`;\n        return {\n            path: '/pages/businessActivity/activityShop/activityShop?' + query\n        };\n    },\n    /* 分享朋友圈 */\n    onShareTimeline() {\n        return {\n            query: `activityId=${this.activityId}&merchantId=${this.merchantId}`\n        };\n    },\n    methods: {\n        toDetail(e) {\n            var activityId = e.currentTarget.dataset.atyid;\n            uni.navigateTo({\n                url: '/pages/businessActivity/activity_detail/activity_detail?activityid=' + activityId\n            });\n        },\n\n        jumpJoinDetail(e) {\n            //跳转参与详情\n            var item = e.currentTarget.dataset.item;\n            var orderState = item.orderState;\n            var orderNum = item.orderNo;\n            uni.navigateTo({\n                url: '/pages/businessActivity/order_list/order_list?orderState=' + orderState + '&orderNo=' + orderNum\n            });\n        },\n\n        _parseDate(str, resType) {\n            //resType 取值 'object' | 'number'\n            var a = str.split(/[^0-9]+/);\n            var date = new Date(a[0], a[1] - 1, a[2], a[3] || 0, a[4] || 0, a[5] || 0);\n            return resType == 'number' ? date.getTime() : date;\n        },\n\n        scrollActivityItem() {\n            if (this.activityId) {\n                setTimeout(() => {\n                    uni.pageScrollTo({\n                        selector: '.activity-' + this.activityId,\n                        complete: (res) => {\n                            this.activityId = null;\n                        }\n                    });\n                }, 500);\n            }\n        },\n\n        //查询活动列表\n        getAllActivity() {\n            app.globalData\n                .sjrequest1('/activityBusiness/pageList', {\n                    pageSize: this.pageSize,\n                    currentPage: this.pageNum,\n                    merchantId: this.merchantId,\n                    // state:2,\n                    commodityClassifyId: this.classId,\n                    templateTag: 'TJFL'\n                })\n                .then((res) => {\n                    uni.stopPullDownRefresh();\n\n                    if (res.statusCode == 200 && res.data.code === 0) {\n                        var data = res.data.data || {};\n                        var list = data.list || [];\n                        var dataList = this.dataList;\n                        this.stopReq = list.length !== this.pageSize;\n                        list.forEach((item) => {\n                            var nowDate = new Date().getTime();\n\n                            if (item.state == 1) {\n                                var startDate = this._parseDate(item.startTime, 'number');\n\n                                item.diffTimes = startDate - nowDate;\n                            } else {\n                                var endDate = this._parseDate(item.endTime, 'number');\n\n                                item.isEnd = endDate - nowDate <= 0;\n                                item.diffTimes = endDate - nowDate;\n                            }\n\n                            item.times = {\n                                days: 0,\n                                hours: 0,\n                                minutes: 0,\n                                seconds: 0\n                            };\n                            var skuList = item.activityCommoditySkuList || [];\n                            var skuItem = skuList[0] || {};\n                            item.imageUrl = item.bannerImgUrls[0];\n                            item.lowPrice = skuItem.livePrice;\n                            item.price = skuItem.price;\n                        });\n\n                        if (this.pageNum == 1) {\n                            dataList = list;\n                        } else {\n                            dataList.push(...list);\n                        }\n\n                        this.setData(\n                            {\n                                dataList\n                            },\n                            () => {\n                                this.scrollActivityItem();\n                            }\n                        );\n                    }\n                });\n        },\n\n        refreshList() {\n            this.setData(\n                {\n                    stopReq: false,\n                    pageNum: 1\n                },\n                () => {\n                    this.getAllActivity();\n                }\n            );\n        },\n\n        activityEnd(e) {\n            var activityId = e.currentTarget.dataset.atyid;\n            var list = this.dataList;\n            var tempIndex = list.findIndex((item) => item.activityId == activityId);\n            var tempObj = list[tempIndex];\n            tempObj.isEnd = true;\n            list.splice(tempIndex, 1);\n            this.setData({\n                dataList: list\n            });\n        },\n\n        timeChange(e, _dataset) {\n            /* ---处理dataset begin--- */\n            this.datasetHandle(e, _dataset);\n            /* ---处理dataset end--- */\n            var index = e.currentTarget.dataset.index;\n            var detail = e.detail;\n\n            for (var key in detail) {\n                var value = detail[key];\n\n                if (value < 10) {\n                    detail[key] = '0' + value;\n                } else {\n                    detail[key] = value;\n                }\n            }\n\n            var list = this.dataList;\n\n            if (list[index]) {\n                list[index].times = detail;\n            }\n\n            this.setData({\n                dataList: list\n            });\n        },\n\n        finishFun(e, _dataset) {\n            /* ---处理dataset begin--- */\n            this.datasetHandle(e, _dataset);\n            /* ---处理dataset end--- */\n            //倒计时结束\n            var index = e.currentTarget.dataset.index;\n            var list = this.dataList;\n            var item = list[index];\n\n            if (item && item.state == 1) {\n                var nowDate = new Date().getTime();\n\n                var endDate = this._parseDate(item.endTime, 'number');\n\n                item.diffTimes = endDate - nowDate;\n                item.state = 2;\n                this.setData({\n                    dataList: list\n                });\n            }\n        },\n\n        getSubscribeTempId(sceneType) {\n            //获取订阅消息模板id\n            var appid = this.appid;\n\n            if (appid) {\n                return app.globalData\n                    .sjrequest1('/subTemplate/listPriTemplateId', {\n                        authorizerAppid: appid,\n                        sceneType\n                    })\n                    .then((res) => {\n                        if (res.statusCode == 200 && res.data.code == 200) {\n                            return res.data.data;\n                        }\n                    });\n            }\n        },\n\n        newActivitySubscribe() {\n            //订阅新活动提醒\n            this.getSubscribeTempId('7').then((tempids) => {\n                console.log('模板id:', tempids);\n                uni.requestSubscribeMessage({\n                    tmplIds: tempids,\n                    success: (res) => {\n                        if (res[tempids[0]] === 'accept') {\n                            app.globalData\n                                .sjrequest1('/subscription/add', [\n                                    {\n                                        marchantid: this.merchantId,\n                                        appid: this.appid,\n                                        templateid: tempids[0],\n                                        targetid: '',\n                                        targettype: 2,\n                                        status: 1\n                                    }\n                                ])\n                                .then((res) => {\n                                    if (res.statusCode == 200 && res.data.code == 0) {\n                                        uni.showToast({\n                                            title: '订阅成功',\n                                            icon: 'none'\n                                        });\n                                    }\n                                });\n                        }\n                    }\n                });\n            });\n        },\n\n        activityStrartSubscribe(e) {\n            //订阅活动开始提醒\n            var atyid = e.currentTarget.dataset.atyid;\n            this.getSubscribeTempId('8').then((tempids) => {\n                uni.requestSubscribeMessage({\n                    tmplIds: tempids,\n                    success: (res) => {\n                        if (res[tempids[0]] === 'accept') {\n                            app.globalData\n                                .sjrequest1('/subscription/add', [\n                                    {\n                                        marchantid: this.merchantId,\n                                        appid: this.appid,\n                                        templateid: tempids[0],\n                                        targetid: atyid,\n                                        targettype: 2,\n                                        status: 1\n                                    }\n                                ])\n                                .then((res) => {\n                                    if (res.statusCode == 200 && res.data.code == 0) {\n                                        uni.showToast({\n                                            title: '订阅成功',\n                                            icon: 'none'\n                                        });\n                                    }\n                                });\n                        }\n                    }\n                });\n            });\n        }\n    }\n};\n</script>\n<style>\n@import '../../../styles/me_common.css'; /* pages/businessActivity/activityShop/activityShop.wxss */\npage {\n    background-color: #000;\n}\n.activity-list-container {\n    margin: 20rpx;\n    position: relative;\n}\n.new-activity-remind {\n    position: absolute;\n    top: 0;\n    right: 0;\n    font-size: 28rpx;\n    background-color: #eb1918;\n    width: 192rpx;\n    color: #fff;\n    height: 62rpx;\n    text-align: center;\n    line-height: 62rpx;\n    border-radius: 0px 16rpx 0px 16rpx;\n}\n.activity-list-info {\n    background-color: #fff;\n    border-radius: 16rpx;\n    overflow: hidden;\n    margin-bottom: 20rpx;\n}\n.activity-top {\n    position: relative;\n    width: 100%;\n}\n.activity-img {\n    width: 100%;\n    height: 454rpx;\n    background-color: #999999;\n}\n.activity-num {\n    height: 60rpx;\n    line-height: 60rpx;\n    position: absolute;\n    font-size: 30rpx;\n    left: -10rpx;\n    bottom: 8rpx;\n    color: #fff;\n}\n.activity-num .triangle-box {\n    border: 20rpx solid transparent;\n    border-right-color: #ed2625;\n}\n.activity-num .btn_last {\n    height: 64rpx;\n    padding: 0 10rpx;\n    line-height: 64rpx;\n    background-color: #ed2625;\n    border-radius: 10rpx;\n}\n.down-order-num {\n    bottom: 84rpx;\n}\n\n.activity-foot {\n    background-color: #fff;\n    padding-bottom: 28rpx;\n}\n.activity-foot .msg-line-box {\n    font-size: 24rpx;\n    color: #fff;\n    box-sizing: border-box;\n    box-sizing: border-box;\n    padding: 0 10rpx;\n    margin-bottom: 10rpx;\n}\n.activity-foot .not-complete {\n    font-size: 26rpx;\n    background-color: #1577ff;\n    height: 52rpx;\n    line-height: 42rpx;\n}\n.activity-foot .complete {\n    background-color: #ff9215;\n    height: 52rpx;\n}\n.activity-foot .complete .view-detail {\n    background-color: #dc7600;\n    padding: 0rpx 10rpx;\n    border-radius: 10rpx;\n}\n.activity-foot .not-complete .view-detail {\n    background-color: #074fb3;\n    padding: 0rpx 10rpx;\n    border-radius: 10rpx;\n}\n.activity-foot .foot-line-item {\n    height: 60rpx;\n}\n.activity-foot .activity-shop-name {\n    font-size: 30rpx;\n    color: #fff;\n    border-radius: 10rpx;\n    background-color: #1577ff;\n    padding: 5rpx 10rpx;\n}\n.activity-foot .people-num {\n    font-size: 22rpx;\n    color: #ed2625;\n}\n.activity-foot .price-box {\n    font-size: 24rpx;\n    color: #ed2625;\n    position: relative;\n    bottom: 2px;\n}\n.activity-foot .price-box .price-num {\n    font-size: 36rpx;\n    font-weight: bold;\n    position: relative;\n    top: 3px;\n}\n.activity-foot .activity-goods-name {\n    font-size: 30rpx;\n    color: #333;\n    font-weight: bold;\n}\n.activity-foot .remind-btn {\n    padding: 5rpx 25rpx;\n    background-color: #eb1918;\n    font-size: 22rpx;\n    color: #fff;\n    border-radius: 6rpx;\n}\n.activity-foot .times-text {\n    font-size: 24rpx;\n    color: #ed2625;\n}\n.activity-foot .times-text .time-num {\n    padding: 3rpx 8rpx;\n    border-radius: 8rpx;\n    background-color: #d92322;\n    color: #fff;\n    margin: 0 3rpx;\n}\n\n.place-empty {\n    width: 100%;\n    height: 500rpx;\n    font-size: 32rpx;\n    color: #999;\n}\n</style>\n","import mod from \"-!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activityShop.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../hbuild/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./activityShop.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1659404719028\n      var cssReload = require(\"D:/hbuild/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}