<view><view><view class="top-tab"><scroll-view class="top-tab-list-scroll" scroll-x="{{true}}"><view class="me-fx-row tab-list-box"><block wx:for="{{topTabList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['me-fx-col me-fx-sb-c tab-item '+(item.status==currentStatus?'sel-item':'')]}}" data-status="{{item.status}}" data-event-opts="{{[['tap',[['switchStatus',['$event']]]]]}}" bindtap="__e"><text class="me-fx-1 tab-item-name">{{item.name}}</text><view class="unline-box"></view><block wx:if="{{item.count}}"><text class="count-num">{{item.count}}</text></block></view></block></view></scroll-view></view><block wx:if="{{dataList.length}}"><view class="order-list"><block wx:for="{{dataList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="order-item" data-item="{{item}}"><view class="me-fx-row me-fx-sb-c"><text>{{"订单号:"+item.orderNumber}}</text><text class="status-text">{{item.orderStateText}}</text></view><view class="me-fx-row goods-info"><image class="goods-img" src="{{item.bannerImgUrls[0]}}"></image><view class="me-fx-1 me-fx-col me-fx-sb"><view><view class="me-full-text goods-name">{{item.commodityName}}</view><text class="specification">{{"规格:"+item.skuName}}</text></view><view class="me-fx-row me-fx-sb-c"><text>{{"￥"+item.price}}</text><text>{{"x"+item.amount}}</text></view></view></view><view class="me-fx-row me-fx-end payment-amount"><text>{{"实付：￥"+item.actualMoney}}</text></view><view class="order-show-info"><view>{{"预计到店时间："+item.arriveTime}}</view><view>{{"联系人："+item.shippingInfo.contacts+" "+item.shippingInfo.contactsWay}}</view><view>{{"商家地址："+merchantAddress}}</view><view>{{"留言："+(item.message||'没有留言')}}</view></view><view class="me-fx-row me-fx-end-c item-footer"><block wx:if="{{item.orderState===0&&item.isDelete!=1}}"><van-count-down vue-id="{{'83b07e14-1-'+index}}" time="{{item.downTimes}}" use-slot="{{true}}" auto-start="{{true}}" data-index="{{index}}" data-event-opts="{{[['^finish',[['finishFun',['$event',['o',['index',index]]]]]],['^change',[['changeFun',['$event',['o',['index',index]]]]]]]}}" bind:finish="__e" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{item.downTimes>0}}"><view class="me-fx-row me-fx-start-c down-content"><image class="shi-zhong-icon" src="/static/pages/img/shizhong.png"></image><text>{{"支付剩余："+item.downTimeObj.minutes+"分"+item.downTimeObj.seconds+"秒"}}</text></view></block><block wx:else><view class="down-content">待付款订单已过期</view></block></van-count-down></block><block wx:if="{{item.isDelete==1||item.orderState==3||item.orderState==0}}"><button class="btn blue-btn" data-item="{{item}}" data-event-opts="{{[['tap',[['delOrder',['$event']]]]]}}" catchtap="__e">删除订单</button></block><block wx:if="{{item.orderState==0&&item.isDelete!=1}}"><button class="btn red-btn" data-item="{{item}}" data-event-opts="{{[['tap',[['goPay',['$event']]]]]}}" catchtap="__e">去支付</button></block><block wx:if="{{item.orderState==1}}"><button class="btn red-btn" data-item="{{item}}" data-event-opts="{{[['tap',[['showVerificationCode',['$event']]]]]}}" catchtap="__e">核销码</button></block><block wx:if="{{item.orderState==2}}"><button class="btn yellow-btn" data-item="{{item}}" data-event-opts="{{[['tap',[['confirmDelivery',['$event']]]]]}}" catchtap="__e">确认收货</button></block><block wx:if="{{item.isDelete==1||item.orderState==3}}"><button class="btn yellow-btn" data-item="{{item}}" data-event-opts="{{[['tap',[['jumpGoodsDetail',['$event']]]]]}}" catchtap="__e">再次拼单</button></block></view></view></block></view></block><block wx:else><view class="me-fx-col me-fx-c-c list-empty-box"><text>暂无数据</text></view></block></view><van-popup vue-id="83b07e14-2" show="{{showCancelWhy}}" round="{{true}}" close-on-click-overlay="{{true}}" position="bottom" custom-style="border-radius:24rpx 24rpx 0 0;" data-event-opts="{{[['^clickOverlay',[['closePopup']]]]}}" data-com-type="wx" bind:clickOverlay="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="cancel-why-content"><view class="me-fx-row me-fx-sb-c top-box"><text data-event-opts="{{[['tap',[['closePopup',['$event']]]]]}}" class="cancel-btn" bindtap="__e">取消</text><text class="title-text">{{popupTitle}}</text><text data-event-opts="{{[['tap',[['popupConfrimHandle',['$event']]]]]}}" class="confirm-btn" bindtap="__e">确认</text></view><view class="radio-list"><block wx:for="{{whyList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="me-fx-row me-fx-start-c why-item" data-whynum="{{item.whyNum}}" data-event-opts="{{[['tap',[['selectWhy',['$event']]]]]}}" bindtap="__e"><view class="{{['radio-box '+(item.whyNum==whyNum?'checked-radio':'')]}}"></view><text>{{item.content}}</text></view></block><textarea data-event-opts="{{[['input',[['textareaChange',['$event']]]]]}}" class="why-textarea" value="{{reasonText}}" bindinput="__e"></textarea></view></view></van-popup><block wx:if="{{showCodeBox}}"><view data-event-opts="{{[['tap',[['hideCodeBox',['$event']]]]]}}" class="me-fx-col me-fx-c-c verification-code-box" bindtap="__e"><view class="code-container"><canvas class="verification-code-img" canvas-id="myQrcode"></canvas></view></view></block></view>